{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\vscommunity\\\\ExpenseTrackerFront\\\\expensetracker\\\\src\\\\Components\\\\Pages\\\\ProfilePage.tsx\",\n    _s = $RefreshSig$();\n\nimport { Grid, makeStyles, Typography, Divider, Dialog } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport './PageStyles.css';\nimport FlyingGridTile from '../Tiles/FlyingGridTile';\nimport { CircularProgress } from '@material-ui/core';\nimport useSessionStorage from '../../CustomHooks/StorageHooks/useSessionStorage';\nimport PurseExpenseTable from '../Tables/PurseExpenseTable';\nimport { GetCurrentUserPurses } from '../../Services/purse.services/Purse.service';\nimport EditProfileButton from '../Buttons/EditProfileButton';\nimport { GetCountUserExpenses } from '../../Services/expense.service/ExpenseService';\nimport { GetCurrentUserData } from '../../Services/user.services/User.service';\nimport EditProfileForm from '../Forms/EditProfileForm/EditProfileForm';\nimport { useHistory } from 'react-router-dom';\nconst useStyles = makeStyles(theme => ({\n  contentList: {\n    justifyContent: \"center\",\n    overflowX: \"hidden\",\n    height: \"fit-content\",\n    padding: 20\n  },\n  tile: {\n    border: \"1px solid black\"\n  },\n  paperTile: {\n    borderRadius: \"15px 15px 7px 7px\",\n    height: \"fit-content\",\n    width: 300,\n    backgroundColor: '#A0ABEF'\n  },\n  userStatusText: {\n    fontFamily: \"Lucida Bright\"\n  },\n  nameText: {\n    fontFamily: \"Candara\",\n    fontSize: \"inherit\",\n    fontWeight: \"inherit\"\n  },\n  profileHeader: {\n    marginBottom: 10,\n    color: theme.palette.primary.dark\n  },\n  buttonSetting: {\n    margin: 5\n  },\n  name: {\n    color: theme.palette.primary.dark,\n    marginBottom: 15\n  },\n  subInfo: {\n    color: theme.palette.primary.dark\n  }\n}));\n\nconst ProfilePage = () => {\n  _s();\n\n  const [userData, setUserData] = useSessionStorage(\"userData\", undefined); // const [isLoadingUser, setIsLoadingUser] = useState<boolean>(true);\n\n  const classes = useStyles();\n  const [isLoadingPurses, setIsLoadingPurses] = useState(true);\n  const [isLoadingExpenses, setIsLoadingExpenses] = useState(true);\n  const [pursesData, setPursesData] = useSessionStorage(\"pursesData\", []);\n  const [countExpenses, setCountExpenses] = useState(0);\n  const [isOpen, setIsOpen] = useState(false);\n  const [rerender, setRerender] = useState(true);\n  const [dailyExpenseSum, setDailyExpenseSum, removeDailyExpenseSum] = useSessionStorage(\"dailyExpenseSum\", []);\n  const [monlyExpenseSum, setMonlyExpenseSum, removeMonthlyExpenseSum] = useSessionStorage(\"monlyExpenseSum\", []);\n  const [yearlyExpenseSum, setYearlyExpenseSum, removeYearlyExpenseSum] = useSessionStorage(\"yearlyExpenseSum\", []);\n  const history = useHistory();\n  useEffect(() => {\n    if (rerender) {\n      removeDailyExpenseSum();\n      removeMonthlyExpenseSum();\n      removeYearlyExpenseSum();\n      GetCountUserExpenses().then(res => {\n        if (res.response.status == 200) {\n          setCountExpenses(res.data);\n          setIsLoadingExpenses(false);\n        }\n      });\n      GetCurrentUserPurses().then(result => {\n        if (result.response.status == 200) {\n          setPursesData(result.data);\n          setIsLoadingPurses(false);\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n      GetCurrentUserData().then(res => {\n        if (res.status == 200) {\n          setUserData(res.data); // setIsLoadingUser(false);\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n\n    setRerender(false);\n  }, [rerender]);\n\n  const handleOpen = () => {\n    setIsOpen(true);\n  };\n\n  const handleClose = () => {\n    // setIsLoadingUser(true);\n    setRerender(true);\n    setIsOpen(false);\n    history.push();\n  }; // if(isLoadingUser)\n  // {\n  //     return(\n  //         <Grid container xs={12} >\n  //             <CircularProgress color=\"secondary\" />\n  //         </Grid>\n  //     )\n  // }\n\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      justify: \"center\",\n      className: \"contentDiv\",\n      xs: 10,\n      xl: 9,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 10,\n        className: classes.profileHeader,\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          children: \"User profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(Divider, {\n          variant: \"middle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        xs: 12,\n        container: true,\n        className: classes.contentList,\n        children: [/*#__PURE__*/_jsxDEV(FlyingGridTile, {\n          xl: 10,\n          xs: 11,\n          paddingBottom: 16,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            spacing: 3,\n            style: {\n              height: \"fit-content\",\n              justifyContent: \"center\"\n            },\n            container: true,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              item: true,\n              xs: 12,\n              className: \"boxAvatar\",\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                xs: 12,\n                container: true,\n                direction: \"row-reverse\",\n                children: /*#__PURE__*/_jsxDEV(EditProfileButton, {\n                  onClick: handleOpen,\n                  style: {\n                    margin: 5\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                style: {\n                  height: 170\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              className: classes.name,\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h4\",\n                align: \"center\",\n                style: {\n                  fontWeight: 600\n                },\n                children: userData == undefined ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                  color: \"secondary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 62\n                }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [userData.firstName, \" \", userData.lastName]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              className: classes.subInfo,\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                align: \"center\",\n                variant: \"h6\",\n                children: userData == undefined ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                  color: \"secondary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 62\n                }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Email:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 41\n                  }, this), \" \", userData.email]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              className: classes.subInfo,\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                align: \"center\",\n                variant: \"h6\",\n                children: userData == undefined ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                  color: \"secondary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 62\n                }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"UserName:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 182,\n                    columnNumber: 41\n                  }, this), \" \", userData.userName]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Divider, {\n              variant: \"middle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              justify: \"space-between\",\n              container: true,\n              item: true,\n              xs: 11,\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                className: classes.subInfo,\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: isLoadingPurses ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                    color: \"secondary\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 64\n                  }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Count purses:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 192,\n                      columnNumber: 51\n                    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 192,\n                      columnNumber: 71\n                    }, this), pursesData.length]\n                  }, void 0, true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                className: classes.subInfo,\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: isLoadingExpenses ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                    color: \"secondary\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 66\n                  }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Count expenses:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 200,\n                      columnNumber: 47\n                    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 200,\n                      columnNumber: 69\n                    }, this), countExpenses]\n                  }, void 0, true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(FlyingGridTile, {\n          xl: 10,\n          xs: 11,\n          children: /*#__PURE__*/_jsxDEV(PurseExpenseTable, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n        open: isOpen,\n        children: /*#__PURE__*/_jsxDEV(EditProfileForm, {\n          handleClose: handleClose\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ProfilePage, \"CHyrXttIkZs7iSBxznL5Wssc+xk=\", false, function () {\n  return [useSessionStorage, useStyles, useSessionStorage, useSessionStorage, useSessionStorage, useSessionStorage, useHistory];\n});\n\n_c = ProfilePage;\nexport default ProfilePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfilePage\");","map":{"version":3,"sources":["D:/vscommunity/ExpenseTrackerFront/expensetracker/src/Components/Pages/ProfilePage.tsx"],"names":["Grid","makeStyles","Typography","Divider","Dialog","React","useEffect","useState","FlyingGridTile","CircularProgress","useSessionStorage","PurseExpenseTable","GetCurrentUserPurses","EditProfileButton","GetCountUserExpenses","GetCurrentUserData","EditProfileForm","useHistory","useStyles","theme","contentList","justifyContent","overflowX","height","padding","tile","border","paperTile","borderRadius","width","backgroundColor","userStatusText","fontFamily","nameText","fontSize","fontWeight","profileHeader","marginBottom","color","palette","primary","dark","buttonSetting","margin","name","subInfo","ProfilePage","userData","setUserData","undefined","classes","isLoadingPurses","setIsLoadingPurses","isLoadingExpenses","setIsLoadingExpenses","pursesData","setPursesData","countExpenses","setCountExpenses","isOpen","setIsOpen","rerender","setRerender","dailyExpenseSum","setDailyExpenseSum","removeDailyExpenseSum","monlyExpenseSum","setMonlyExpenseSum","removeMonthlyExpenseSum","yearlyExpenseSum","setYearlyExpenseSum","removeYearlyExpenseSum","history","then","res","response","status","data","result","catch","error","console","log","handleOpen","handleClose","push","firstName","lastName","email","userName","length"],"mappings":"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","sourcesContent":["import { Grid, makeStyles, Typography, Divider, DialogContent, Button, Dialog, DialogActions, DialogContentText, DialogTitle } from '@material-ui/core';\r\nimport React, { useEffect, useState } from 'react';\r\nimport './PageStyles.css';\r\nimport FlyingGridTile from '../Tiles/FlyingGridTile';\r\nimport { CircularProgress } from '@material-ui/core';\r\nimport User from '../../Data/Models/User/User';\r\nimport useSessionStorage from '../../CustomHooks/StorageHooks/useSessionStorage';\r\nimport PurseExpenseTable from '../Tables/PurseExpenseTable';\r\nimport Purse from '../../Data/Models/Purses/Purse';\r\nimport { GetCurrentUserPurses } from '../../Services/purse.services/Purse.service';\r\nimport EditProfileButton from '../Buttons/EditProfileButton';\r\nimport { GetCountUserExpenses } from '../../Services/expense.service/ExpenseService';\r\nimport { GetCurrentUserData } from '../../Services/user.services/User.service';\r\nimport ExpenseForSum from '../../Data/Models/Expenses/ExpenseForSum';\r\nimport EditProfileForm from '../Forms/EditProfileForm/EditProfileForm';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    contentList: {\r\n        justifyContent:\"center\",\r\n        overflowX: \"hidden\",\r\n        height: \"fit-content\",\r\n        padding: 20\r\n    },\r\n    tile: {\r\n        border: \"1px solid black\"\r\n    },\r\n    paperTile: {\r\n        borderRadius: \"15px 15px 7px 7px\",\r\n        height: \"fit-content\",\r\n        width: 300,\r\n        backgroundColor: '#A0ABEF'\r\n      },\r\n      userStatusText: {\r\n          fontFamily: \"Lucida Bright\"\r\n      },\r\n      nameText: {\r\n          fontFamily: \"Candara\",\r\n          fontSize: \"inherit\",\r\n          fontWeight: \"inherit\"\r\n      },\r\n      profileHeader: {\r\n        marginBottom:10,\r\n        color: theme.palette.primary.dark\r\n    },\r\n    buttonSetting: {\r\n        margin: 5\r\n    },\r\n    name: {\r\n        color: theme.palette.primary.dark,\r\n        marginBottom: 15,\r\n    },\r\n    subInfo: {\r\n        color: theme.palette.primary.dark,\r\n    }\r\n}));\r\n\r\nconst ProfilePage: React.FC = () => {\r\n\r\n    const [userData, setUserData] = useSessionStorage<User | undefined>(\"userData\", \r\n    undefined);\r\n    // const [isLoadingUser, setIsLoadingUser] = useState<boolean>(true);\r\n    const classes = useStyles();\r\n    const [isLoadingPurses, setIsLoadingPurses] = useState(true);\r\n    const [isLoadingExpenses, setIsLoadingExpenses] = useState(true);\r\n    const [pursesData, setPursesData] = useSessionStorage<Purse[]>(\"pursesData\", []);\r\n    const [countExpenses, setCountExpenses] = useState<number>(0);\r\n    const [isOpen, setIsOpen] = useState<boolean>(false);\r\n    const [rerender, setRerender] = useState<boolean>(true);\r\n    const [dailyExpenseSum, setDailyExpenseSum , removeDailyExpenseSum] = useSessionStorage<ExpenseForSum[]>(\r\n        \"dailyExpenseSum\", []\r\n        );\r\n    const [monlyExpenseSum, setMonlyExpenseSum, removeMonthlyExpenseSum] = useSessionStorage<ExpenseForSum[]>(\r\n        \"monlyExpenseSum\", []\r\n        );\r\n    const [yearlyExpenseSum, setYearlyExpenseSum, removeYearlyExpenseSum] = useSessionStorage<ExpenseForSum[]>(\r\n        \"yearlyExpenseSum\", []\r\n        );\r\n\r\n    const history = useHistory();\r\n\r\n\r\n    useEffect(() => {\r\n        if(rerender)\r\n        {\r\n            removeDailyExpenseSum();\r\n            removeMonthlyExpenseSum();\r\n            removeYearlyExpenseSum();\r\n            GetCountUserExpenses().then(res => {\r\n                if(res.response.status == 200)\r\n                {\r\n                    setCountExpenses(res.data);\r\n                    setIsLoadingExpenses(false);\r\n                }\r\n            });\r\n            GetCurrentUserPurses()\r\n                .then(result => {\r\n                    if(result.response.status == 200)\r\n                    {\r\n                        setPursesData(result.data);\r\n                        setIsLoadingPurses(false);\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.log(error);\r\n                });\r\n            GetCurrentUserData()\r\n                .then(res => {\r\n                    if(res.status == 200)\r\n                    {\r\n                        setUserData(res.data);\r\n                        // setIsLoadingUser(false);\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.log(error);\r\n                });\r\n        }\r\n        setRerender(false);\r\n    }, [rerender]);\r\n\r\n    const handleOpen = () => {\r\n        setIsOpen(true);\r\n    }\r\n\r\n    const handleClose = () => {\r\n        // setIsLoadingUser(true);\r\n        setRerender(true);\r\n        setIsOpen(false);\r\n        history.push()\r\n    }\r\n\r\n    // if(isLoadingUser)\r\n    // {\r\n    //     return(\r\n    //         <Grid container xs={12} >\r\n    //             <CircularProgress color=\"secondary\" />\r\n    //         </Grid>\r\n    //     )\r\n    // }\r\n\r\n    return(\r\n        <React.Fragment> \r\n            <Grid container justify=\"center\" className=\"contentDiv\" xs={10} xl={9}>\r\n                <Grid item xs={10} className={classes.profileHeader}>\r\n                    <Typography variant=\"h4\">\r\n                        User profile\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <Divider variant=\"middle\" />\r\n                </Grid>\r\n                <Grid xs={12} container className={classes.contentList}>\r\n                    <FlyingGridTile xl={10} xs={11} paddingBottom={16}>\r\n                        <Grid spacing={3} style={{height:\"fit-content\",\r\n                            justifyContent: \"center\",}} container>\r\n                            <Grid container item xs={12} className=\"boxAvatar\">\r\n                                    <Grid xs={12} container direction=\"row-reverse\">\r\n                                        <EditProfileButton onClick={handleOpen}\r\n                                        style={{margin: 5}} />\r\n                                    </Grid>\r\n                                    <Grid item xs={12} style={{height: 170}} />\r\n                            </Grid>\r\n                            <Grid item xs={12} className={classes.name}>\r\n                                <Typography variant=\"h4\"\r\n                                align=\"center\" style={{fontWeight:600}} >\r\n                                    {userData == undefined ? <CircularProgress color=\"secondary\" />\r\n                                    : <>{userData.firstName} {userData.lastName}</>\r\n                                    }\r\n                                </Typography>\r\n                            </Grid>\r\n                            <Grid item xs={12} className={classes.subInfo}>\r\n                                <Typography align=\"center\" variant=\"h6\">\r\n                                    {userData == undefined ? <CircularProgress color=\"secondary\" />\r\n                                    : <><b>Email:</b> {userData.email}</>\r\n                                    }\r\n                                </Typography>\r\n                            </Grid>\r\n                            <Grid item xs={12} className={classes.subInfo}>\r\n                                <Typography align=\"center\" variant=\"h6\">\r\n                                    {userData == undefined ? <CircularProgress color=\"secondary\" />\r\n                                    : <><b>UserName:</b> {userData.userName}</>\r\n                                    }\r\n                                </Typography>\r\n                            </Grid>\r\n                            <Divider variant=\"middle\" />\r\n                            <Grid justify=\"space-between\" container item xs={11}>\r\n                                <Grid item className={classes.subInfo}>\r\n                                    <Typography>\r\n                                        {\r\n                                            isLoadingPurses ? (<CircularProgress color=\"secondary\" />) :\r\n                                                <><b>Count purses:</b><br/>{pursesData.length}</>\r\n                                        }    \r\n                                        </Typography>\r\n                                </Grid>\r\n                                <Grid item className={classes.subInfo}>\r\n                                    <Typography>\r\n                                        {\r\n                                            isLoadingExpenses ? (<CircularProgress color=\"secondary\" />) : \r\n                                            <><b>Count expenses:</b><br/>{countExpenses}</>\r\n                                        }\r\n                                    </Typography>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </FlyingGridTile>\r\n                    <FlyingGridTile xl={10} xs={11}>\r\n                        <PurseExpenseTable />\r\n                    </FlyingGridTile>\r\n                </Grid>\r\n                <Dialog open={isOpen}>\r\n                    <EditProfileForm handleClose={handleClose} />\r\n                </Dialog>\r\n            </Grid>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default ProfilePage;"]},"metadata":{},"sourceType":"module"}