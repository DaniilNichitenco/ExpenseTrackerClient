{"ast":null,"code":"import API from '../Api';\nimport { GetCurrentUser } from '../auth.services/auth-service';\nimport jwt_decode from 'jwt-decode';\nimport LogicalOperators from '../pagedRequests/LogicalOperators';\nexport const GetAllExpenses = async () => {\n  return API.get(\"/expenses/all\").then(response => {\n    let expenses = [];\n    let data = response.data;\n    data.forEach(element => {\n      let dateString = element.date;\n      let date = dateString.substring(0, 10);\n      let expense = {\n        id: element.id,\n        purseId: element.purseId,\n        title: element.title,\n        money: element.money,\n        date: new Date(date)\n      };\n      expenses.push(expense);\n    });\n    return {\n      response: response,\n      data: expenses\n    };\n  }).catch(error => {\n    console.log(error);\n    return {\n      response: error.response,\n      data: error.response.data\n    };\n  });\n};\n_c = GetAllExpenses;\nexport const GetExpensesForCurrentYear = async () => {\n  return API.get(\"/expenses/year\").then(response => {\n    let expenses = response.data.expenses;\n    console.log(expenses);\n    return {\n      response: response,\n      data: expenses\n    };\n  }).catch(error => {\n    console.log(error);\n    return {\n      response: error.response,\n      data: error.response.data\n    };\n  });\n};\n_c2 = GetExpensesForCurrentYear;\nexport const DeleteExpense = async id => {\n  API.delete(\"/expenses/\" + id).then(response => {\n    console.log(response);\n    return {\n      response: response\n    };\n  }).catch(error => {\n    console.log(error);\n    return {\n      response: error.response\n    };\n  });\n};\n_c3 = DeleteExpense;\nexport const UpdateExpense = async id => {\n  return API.put(\"/expenses\").then(response => {\n    console.log(response);\n    return {\n      response: response\n    };\n  }).catch(error => {\n    console.log(error);\n    return {\n      response: error.response\n    };\n  });\n};\n_c4 = UpdateExpense;\nexport const GetExpensesSumForYear = async () => {\n  return API.get(\"/expenses/sum/year\").then(response => {\n    console.log(response);\n    const sums = response.data.sums;\n    return {\n      response: response,\n      data: sums\n    };\n  }).catch(error => {\n    console.log(error);\n    return {\n      response: error.response,\n      data: error.response.data\n    };\n  });\n};\n_c5 = GetExpensesSumForYear;\nexport const GetExpensesSumForMonth = async () => {\n  return API.get(\"/expenses/sum/month\").then(response => {\n    console.log(response);\n    const sums = response.data.sums;\n    return {\n      response: response,\n      data: sums\n    };\n  }).catch(error => {\n    console.log(error);\n    return {\n      response: error.response,\n      data: error.response.data\n    };\n  });\n};\n_c6 = GetExpensesSumForMonth;\nexport const GetExpensesSumForToday = async () => {\n  return API.get(\"/expenses/sum/today\").then(response => {\n    console.log(response);\n    const sums = response.data.sums;\n    return {\n      response: response,\n      data: sums\n    };\n  }).catch(error => {\n    console.log(error);\n    return {\n      response: error.response,\n      data: error.response.data\n    };\n  });\n};\n_c7 = GetExpensesSumForToday;\nexport const GetUserExpenses = async () => {\n  return API.get(\"/expenses\").then(response => {\n    let expenses = [];\n    let data = response.data;\n    data.forEach(element => {\n      let dateString = element.date;\n      let date = dateString.substring(0, 10);\n      let expense = {\n        id: element.id,\n        purseId: element.purseId,\n        title: element.title,\n        money: element.money,\n        date: new Date(date)\n      };\n      expenses.push(expense);\n    });\n    return {\n      response: response,\n      data: expenses\n    };\n  }).catch(error => {\n    console.log(error);\n    return {\n      response: error.response,\n      data: error.response.data\n    };\n  });\n};\n_c8 = GetUserExpenses;\nexport const GetUserExpensesByTopic = async topic => {\n  return API.get(\"/expenses/topic/\" + topic.id).then(response => {\n    let expenses = [];\n    let data = response.data;\n    data.forEach(element => {\n      let dateString = element.date;\n      let date = dateString.substring(0, 10);\n      let expense = {\n        id: element.id,\n        purseId: element.purseId,\n        title: element.title,\n        money: element.money,\n        date: new Date(date)\n      };\n      expenses.push(expense);\n    });\n    return {\n      response: response,\n      data: expenses\n    };\n  }).catch(error => {\n    console.log(error);\n    return {\n      response: error.response,\n      data: error.response.data\n    };\n  });\n};\n_c9 = GetUserExpensesByTopic;\nexport const GetPagedUserExpenses = async (request, topic) => {\n  const token = GetCurrentUser().accessToken;\n  const userId = jwt_decode(token).UserId;\n  const filters = {\n    logicalOperators: LogicalOperators.and,\n    filters: [{\n      path: \"OwnerId\",\n      value: userId\n    }]\n  };\n\n  if (topic != undefined) {\n    filters.filters.push({\n      path: \"TopicId\",\n      value: topic.id.toString()\n    });\n  }\n\n  request.requestFilters = filters;\n\n  if (request.columnNameForSorting == undefined) {\n    request.columnNameForSorting = \"Date\";\n    request.sortDirection = \"DESC\";\n  }\n\n  console.log(\"request: \" + JSON.stringify(request));\n  return API.post(\"Expenses/PaginatedSearch\", request).then(response => {\n    let result = response.data;\n    let expenses = [];\n    result.items.forEach(e => {\n      let dateString = e.date.toString();\n      let date = dateString.substring(0, 10);\n      let expense = {\n        id: e.id,\n        purseId: e.purseId,\n        title: e.title,\n        money: e.money,\n        date: new Date(date).toString()\n      };\n      console.log(expense.date.getFullYear());\n      expenses.push(expense);\n    });\n    result.items = expenses;\n    return {\n      response: response,\n      data: result\n    };\n  }).catch(error => {\n    console.log(error);\n    return {\n      response: error.response,\n      data: error.response.data\n    };\n  });\n};\n_c10 = GetPagedUserExpenses;\nexport default {\n  GetExpensesForCurrentYear,\n  GetAllExpenses,\n  DeleteExpense,\n  GetExpensesSumForToday,\n  GetExpensesSumForMonth,\n  GetExpensesSumForYear,\n  GetUserExpensesByTopic,\n  GetUserExpenses,\n  GetPagedUserExpenses\n};\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10;\n\n$RefreshReg$(_c, \"GetAllExpenses\");\n$RefreshReg$(_c2, \"GetExpensesForCurrentYear\");\n$RefreshReg$(_c3, \"DeleteExpense\");\n$RefreshReg$(_c4, \"UpdateExpense\");\n$RefreshReg$(_c5, \"GetExpensesSumForYear\");\n$RefreshReg$(_c6, \"GetExpensesSumForMonth\");\n$RefreshReg$(_c7, \"GetExpensesSumForToday\");\n$RefreshReg$(_c8, \"GetUserExpenses\");\n$RefreshReg$(_c9, \"GetUserExpensesByTopic\");\n$RefreshReg$(_c10, \"GetPagedUserExpenses\");","map":{"version":3,"sources":["D:/vscommunity/ExpenseTrackerFront/expensetracker/src/Services/expense.service/ExpenseService.tsx"],"names":["API","GetCurrentUser","jwt_decode","LogicalOperators","GetAllExpenses","get","then","response","expenses","data","forEach","element","dateString","date","substring","expense","id","purseId","title","money","Date","push","catch","error","console","log","GetExpensesForCurrentYear","DeleteExpense","delete","UpdateExpense","put","GetExpensesSumForYear","sums","GetExpensesSumForMonth","GetExpensesSumForToday","GetUserExpenses","GetUserExpensesByTopic","topic","GetPagedUserExpenses","request","token","accessToken","userId","UserId","filters","logicalOperators","and","path","value","undefined","toString","requestFilters","columnNameForSorting","sortDirection","JSON","stringify","post","result","items","e","getFullYear"],"mappings":"AAIA,OAAOA,GAAP,MAAgB,QAAhB;AACA,SAASC,cAAT,QAA+B,+BAA/B;AAGA,OAAOC,UAAP,MAAuB,YAAvB;AAEA,OAAOC,gBAAP,MAA6B,mCAA7B;AAEA,OAAO,MAAMC,cAAc,GAAG,YAAY;AAEtC,SAAOJ,GAAG,CAACK,GAAJ,CAAQ,eAAR,EACFC,IADE,CACGC,QAAQ,IAAI;AACd,QAAIC,QAAmB,GAAG,EAA1B;AACA,QAAIC,IAAU,GAAGF,QAAQ,CAACE,IAA1B;AAEAA,IAAAA,IAAI,CAACC,OAAL,CAAaC,OAAO,IAAI;AACpB,UAAIC,UAAU,GAAGD,OAAO,CAACE,IAAzB;AACA,UAAIA,IAAI,GAAGD,UAAU,CAACE,SAAX,CAAqB,CAArB,EAAwB,EAAxB,CAAX;AACA,UAAIC,OAAe,GAAG;AAClBC,QAAAA,EAAE,EAAEL,OAAO,CAACK,EADM;AAElBC,QAAAA,OAAO,EAAEN,OAAO,CAACM,OAFC;AAGlBC,QAAAA,KAAK,EAAEP,OAAO,CAACO,KAHG;AAIlBC,QAAAA,KAAK,EAAER,OAAO,CAACQ,KAJG;AAKlBN,QAAAA,IAAI,EAAE,IAAIO,IAAJ,CAASP,IAAT;AALY,OAAtB;AAQAL,MAAAA,QAAQ,CAACa,IAAT,CAAcN,OAAd;AACH,KAZD;AAcA,WAAO;AACHR,MAAAA,QAAQ,EAAEA,QADP;AAEHE,MAAAA,IAAI,EAAED;AAFH,KAAP;AAIH,GAvBE,EAwBFc,KAxBE,CAwBIC,KAAK,IAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,WAAO;AACHhB,MAAAA,QAAQ,EAAEgB,KAAK,CAAChB,QADb;AAEHE,MAAAA,IAAI,EAAEc,KAAK,CAAChB,QAAN,CAAeE;AAFlB,KAAP;AAIH,GA9BE,CAAP;AA+BH,CAjCM;KAAML,c;AAmCb,OAAO,MAAMsB,yBAAyB,GAAG,YAAY;AAEjD,SAAO1B,GAAG,CAACK,GAAJ,CAAQ,gBAAR,EACFC,IADE,CACGC,QAAQ,IAAI;AACd,QAAIC,QAA0B,GAAGD,QAAQ,CAACE,IAAT,CAAcD,QAA/C;AACAgB,IAAAA,OAAO,CAACC,GAAR,CAAYjB,QAAZ;AAEA,WAAO;AACHD,MAAAA,QAAQ,EAAEA,QADP;AAEHE,MAAAA,IAAI,EAAED;AAFH,KAAP;AAIH,GATE,EAUFc,KAVE,CAUIC,KAAK,IAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,WAAO;AACHhB,MAAAA,QAAQ,EAAEgB,KAAK,CAAChB,QADb;AAEHE,MAAAA,IAAI,EAAEc,KAAK,CAAChB,QAAN,CAAeE;AAFlB,KAAP;AAIH,GAhBE,CAAP;AAiBH,CAnBM;MAAMiB,yB;AAqBb,OAAO,MAAMC,aAAa,GAAG,MAAOX,EAAP,IAAsB;AAE/ChB,EAAAA,GAAG,CAAC4B,MAAJ,CAAW,eAAeZ,EAA1B,EACKV,IADL,CACUC,QAAQ,IAAI;AACdiB,IAAAA,OAAO,CAACC,GAAR,CAAYlB,QAAZ;AAEA,WAAO;AAACA,MAAAA,QAAQ,EAAEA;AAAX,KAAP;AACH,GALL,EAMKe,KANL,CAMWC,KAAK,IAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AAEA,WAAO;AAAChB,MAAAA,QAAQ,EAAEgB,KAAK,CAAChB;AAAjB,KAAP;AACH,GAVL;AAWH,CAbM;MAAMoB,a;AAeb,OAAO,MAAME,aAAa,GAAG,MAAOb,EAAP,IAAsB;AAE/C,SAAOhB,GAAG,CAAC8B,GAAJ,CAAQ,WAAR,EACFxB,IADE,CACGC,QAAQ,IAAI;AACdiB,IAAAA,OAAO,CAACC,GAAR,CAAYlB,QAAZ;AACA,WAAO;AAACA,MAAAA,QAAQ,EAAEA;AAAX,KAAP;AACH,GAJE,EAKFe,KALE,CAKIC,KAAK,IAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,WAAO;AAAChB,MAAAA,QAAQ,EAAEgB,KAAK,CAAChB;AAAjB,KAAP;AACH,GARE,CAAP;AASH,CAXM;MAAMsB,a;AAab,OAAO,MAAME,qBAAqB,GAAG,YAAY;AAE7C,SAAO/B,GAAG,CAACK,GAAJ,CAAQ,oBAAR,EACFC,IADE,CACGC,QAAQ,IAAI;AACdiB,IAAAA,OAAO,CAACC,GAAR,CAAYlB,QAAZ;AACA,UAAMyB,IAAqB,GAAGzB,QAAQ,CAACE,IAAT,CAAcuB,IAA5C;AAEA,WAAO;AACHzB,MAAAA,QAAQ,EAAEA,QADP;AAEHE,MAAAA,IAAI,EAAEuB;AAFH,KAAP;AAIH,GATE,EAUFV,KAVE,CAUIC,KAAK,IAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,WAAO;AACHhB,MAAAA,QAAQ,EAAEgB,KAAK,CAAChB,QADb;AAEHE,MAAAA,IAAI,EAAEc,KAAK,CAAChB,QAAN,CAAeE;AAFlB,KAAP;AAIH,GAhBE,CAAP;AAiBH,CAnBM;MAAMsB,qB;AAqBb,OAAO,MAAME,sBAAsB,GAAG,YAAY;AAE9C,SAAOjC,GAAG,CAACK,GAAJ,CAAQ,qBAAR,EACFC,IADE,CACGC,QAAQ,IAAI;AACdiB,IAAAA,OAAO,CAACC,GAAR,CAAYlB,QAAZ;AACA,UAAMyB,IAAqB,GAAGzB,QAAQ,CAACE,IAAT,CAAcuB,IAA5C;AAEA,WAAO;AACHzB,MAAAA,QAAQ,EAAEA,QADP;AAEHE,MAAAA,IAAI,EAAEuB;AAFH,KAAP;AAIH,GATE,EAUFV,KAVE,CAUIC,KAAK,IAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,WAAO;AACHhB,MAAAA,QAAQ,EAAEgB,KAAK,CAAChB,QADb;AAEHE,MAAAA,IAAI,EAAEc,KAAK,CAAChB,QAAN,CAAeE;AAFlB,KAAP;AAIH,GAhBE,CAAP;AAiBH,CAnBM;MAAMwB,sB;AAqBb,OAAO,MAAMC,sBAAsB,GAAG,YAAY;AAE9C,SAAOlC,GAAG,CAACK,GAAJ,CAAQ,qBAAR,EACFC,IADE,CACGC,QAAQ,IAAI;AACdiB,IAAAA,OAAO,CAACC,GAAR,CAAYlB,QAAZ;AACA,UAAMyB,IAAqB,GAAGzB,QAAQ,CAACE,IAAT,CAAcuB,IAA5C;AAEA,WAAO;AACHzB,MAAAA,QAAQ,EAAEA,QADP;AAEHE,MAAAA,IAAI,EAAEuB;AAFH,KAAP;AAIH,GATE,EAUFV,KAVE,CAUIC,KAAK,IAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,WAAO;AACHhB,MAAAA,QAAQ,EAAEgB,KAAK,CAAChB,QADb;AAEHE,MAAAA,IAAI,EAAEc,KAAK,CAAChB,QAAN,CAAeE;AAFlB,KAAP;AAIH,GAhBE,CAAP;AAiBH,CAnBM;MAAMyB,sB;AAqBb,OAAO,MAAMC,eAAe,GAAG,YAAY;AAEvC,SAAOnC,GAAG,CAACK,GAAJ,CAAQ,WAAR,EACFC,IADE,CACGC,QAAQ,IAAI;AACd,QAAIC,QAAmB,GAAG,EAA1B;AACA,QAAIC,IAAU,GAAGF,QAAQ,CAACE,IAA1B;AAEAA,IAAAA,IAAI,CAACC,OAAL,CAAaC,OAAO,IAAI;AACpB,UAAIC,UAAU,GAAGD,OAAO,CAACE,IAAzB;AACA,UAAIA,IAAI,GAAGD,UAAU,CAACE,SAAX,CAAqB,CAArB,EAAwB,EAAxB,CAAX;AACA,UAAIC,OAAe,GAAG;AAClBC,QAAAA,EAAE,EAAEL,OAAO,CAACK,EADM;AAElBC,QAAAA,OAAO,EAAEN,OAAO,CAACM,OAFC;AAGlBC,QAAAA,KAAK,EAAEP,OAAO,CAACO,KAHG;AAIlBC,QAAAA,KAAK,EAAER,OAAO,CAACQ,KAJG;AAKlBN,QAAAA,IAAI,EAAE,IAAIO,IAAJ,CAASP,IAAT;AALY,OAAtB;AAQAL,MAAAA,QAAQ,CAACa,IAAT,CAAcN,OAAd;AACH,KAZD;AAcA,WAAO;AACHR,MAAAA,QAAQ,EAAEA,QADP;AAEHE,MAAAA,IAAI,EAAED;AAFH,KAAP;AAIH,GAvBE,EAwBFc,KAxBE,CAwBIC,KAAK,IAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AAEA,WAAO;AACHhB,MAAAA,QAAQ,EAACgB,KAAK,CAAChB,QADZ;AAEHE,MAAAA,IAAI,EAAEc,KAAK,CAAChB,QAAN,CAAeE;AAFlB,KAAP;AAIH,GA/BE,CAAP;AAgCH,CAlCM;MAAM0B,e;AAoCb,OAAO,MAAMC,sBAAsB,GAAG,MAAOC,KAAP,IAAwB;AAE1D,SAAOrC,GAAG,CAACK,GAAJ,CAAQ,qBAAqBgC,KAAK,CAACrB,EAAnC,EACFV,IADE,CACGC,QAAQ,IAAI;AACd,QAAIC,QAAmB,GAAG,EAA1B;AACA,QAAIC,IAAU,GAAGF,QAAQ,CAACE,IAA1B;AAEAA,IAAAA,IAAI,CAACC,OAAL,CAAaC,OAAO,IAAI;AACpB,UAAIC,UAAU,GAAGD,OAAO,CAACE,IAAzB;AACA,UAAIA,IAAI,GAAGD,UAAU,CAACE,SAAX,CAAqB,CAArB,EAAwB,EAAxB,CAAX;AACA,UAAIC,OAAe,GAAG;AAClBC,QAAAA,EAAE,EAAEL,OAAO,CAACK,EADM;AAElBC,QAAAA,OAAO,EAAEN,OAAO,CAACM,OAFC;AAGlBC,QAAAA,KAAK,EAAEP,OAAO,CAACO,KAHG;AAIlBC,QAAAA,KAAK,EAAER,OAAO,CAACQ,KAJG;AAKlBN,QAAAA,IAAI,EAAE,IAAIO,IAAJ,CAASP,IAAT;AALY,OAAtB;AAQAL,MAAAA,QAAQ,CAACa,IAAT,CAAcN,OAAd;AACH,KAZD;AAcA,WAAO;AACHR,MAAAA,QAAQ,EAAEA,QADP;AAEHE,MAAAA,IAAI,EAAED;AAFH,KAAP;AAIH,GAvBE,EAwBFc,KAxBE,CAwBIC,KAAK,IAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AAEA,WAAO;AACHhB,MAAAA,QAAQ,EAACgB,KAAK,CAAChB,QADZ;AAEHE,MAAAA,IAAI,EAAEc,KAAK,CAAChB,QAAN,CAAeE;AAFlB,KAAP;AAIH,GA/BE,CAAP;AAgCH,CAlCM;MAAM2B,sB;AAoCb,OAAO,MAAME,oBAAoB,GAAG,OAAOC,OAAP,EAA8BF,KAA9B,KAAgD;AAEhF,QAAMG,KAAK,GAAGvC,cAAc,GAAGwC,WAA/B;AACA,QAAMC,MAAc,GAAIxC,UAAU,CAACsC,KAAD,CAAX,CAA2BG,MAAlD;AAEA,QAAMC,OAAuB,GAAG;AAC5BC,IAAAA,gBAAgB,EAAE1C,gBAAgB,CAAC2C,GADP;AAE5BF,IAAAA,OAAO,EAAE,CACL;AACIG,MAAAA,IAAI,EAAE,SADV;AAEIC,MAAAA,KAAK,EAAEN;AAFX,KADK;AAFmB,GAAhC;;AAUA,MAAGL,KAAK,IAAIY,SAAZ,EACA;AACIL,IAAAA,OAAO,CAACA,OAAR,CAAgBvB,IAAhB,CACI;AACI0B,MAAAA,IAAI,EAAE,SADV;AAEIC,MAAAA,KAAK,EAAEX,KAAK,CAACrB,EAAN,CAASkC,QAAT;AAFX,KADJ;AAMH;;AAEDX,EAAAA,OAAO,CAACY,cAAR,GAAyBP,OAAzB;;AACA,MAAGL,OAAO,CAACa,oBAAR,IAAgCH,SAAnC,EACA;AACIV,IAAAA,OAAO,CAACa,oBAAR,GAA+B,MAA/B;AACAb,IAAAA,OAAO,CAACc,aAAR,GAAwB,MAAxB;AACH;;AACD7B,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAc6B,IAAI,CAACC,SAAL,CAAehB,OAAf,CAA1B;AAEA,SAAOvC,GAAG,CAACwD,IAAJ,CAAS,0BAAT,EAAqCjB,OAArC,EACFjC,IADE,CACGC,QAAQ,IAAI;AACd,QAAIkD,MAA4B,GAAGlD,QAAQ,CAACE,IAA5C;AACA,QAAID,QAAmB,GAAG,EAA1B;AAEAiD,IAAAA,MAAM,CAACC,KAAP,CAAahD,OAAb,CAAqBiD,CAAC,IAAI;AACtB,UAAI/C,UAAU,GAAG+C,CAAC,CAAC9C,IAAF,CAAOqC,QAAP,EAAjB;AACA,UAAIrC,IAAI,GAAGD,UAAU,CAACE,SAAX,CAAqB,CAArB,EAAwB,EAAxB,CAAX;AACA,UAAIC,OAAe,GAAG;AAClBC,QAAAA,EAAE,EAAE2C,CAAC,CAAC3C,EADY;AAElBC,QAAAA,OAAO,EAAE0C,CAAC,CAAC1C,OAFO;AAGlBC,QAAAA,KAAK,EAAEyC,CAAC,CAACzC,KAHS;AAIlBC,QAAAA,KAAK,EAAEwC,CAAC,CAACxC,KAJS;AAKlBN,QAAAA,IAAI,EAAE,IAAIO,IAAJ,CAASP,IAAT,EAAeqC,QAAf;AALY,OAAtB;AAQA1B,MAAAA,OAAO,CAACC,GAAR,CAAYV,OAAO,CAACF,IAAR,CAAa+C,WAAb,EAAZ;AACApD,MAAAA,QAAQ,CAACa,IAAT,CAAcN,OAAd;AACH,KAbD;AAeA0C,IAAAA,MAAM,CAACC,KAAP,GAAelD,QAAf;AAEA,WAAO;AACHD,MAAAA,QAAQ,EAAEA,QADP;AAEHE,MAAAA,IAAI,EAAEgD;AAFH,KAAP;AAIH,GA1BE,EA2BFnC,KA3BE,CA2BIC,KAAK,IAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AAEA,WAAO;AACHhB,MAAAA,QAAQ,EAACgB,KAAK,CAAChB,QADZ;AAEHE,MAAAA,IAAI,EAAEc,KAAK,CAAChB,QAAN,CAAeE;AAFlB,KAAP;AAIH,GAlCE,CAAP;AAmCH,CApEM;OAAM6B,oB;AAsEb,eAAe;AACXZ,EAAAA,yBADW;AAEXtB,EAAAA,cAFW;AAGXuB,EAAAA,aAHW;AAIXO,EAAAA,sBAJW;AAKXD,EAAAA,sBALW;AAMXF,EAAAA,qBANW;AAOXK,EAAAA,sBAPW;AAQXD,EAAAA,eARW;AASXG,EAAAA;AATW,CAAf","sourcesContent":["import Expense from '../../Data/Models/Expenses/Expense';\r\nimport ExpenseForSum from '../../Data/Models/Expenses/ExpenseForSum';\r\nimport ExpensesForYear from '../../Data/Models/Expenses/ExpensesForYear';\r\nimport Topic from '../../Data/Models/Topics/Topic';\r\nimport API from '../Api';\r\nimport { GetCurrentUser } from '../auth.services/auth-service';\r\nimport PagedRequest from '../pagedRequests/PagedRequest';\r\nimport RequestFilters from '../pagedRequests/RequestFilters';\r\nimport jwt_decode from 'jwt-decode';\r\nimport PagedResult from '../pagedRequests/PagedResult';\r\nimport LogicalOperators from '../pagedRequests/LogicalOperators';\r\n\r\nexport const GetAllExpenses = async () => {\r\n    \r\n    return API.get(\"/expenses/all\")\r\n        .then(response => {\r\n            let expenses: Expense[] = [];\r\n            let data:any[] = response.data;\r\n\r\n            data.forEach(element => {\r\n                let dateString = element.date;\r\n                let date = dateString.substring(0, 10);\r\n                let expense:Expense = {\r\n                    id: element.id,\r\n                    purseId: element.purseId,\r\n                    title: element.title,\r\n                    money: element.money,\r\n                    date: new Date(date),\r\n                };\r\n                \r\n                expenses.push(expense);\r\n            });\r\n\r\n            return {\r\n                response: response,\r\n                data: expenses\r\n            };\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n            return {\r\n                response: error.response,\r\n                data: error.response.data\r\n            };\r\n        });\r\n}\r\n\r\nexport const GetExpensesForCurrentYear = async () => {\r\n    \r\n    return API.get(\"/expenses/year\")\r\n        .then(response => {\r\n            let expenses:ExpensesForYear[] = response.data.expenses;\r\n            console.log(expenses);\r\n            \r\n            return {\r\n                response: response,\r\n                data: expenses\r\n            };\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n            return {\r\n                response: error.response,\r\n                data: error.response.data\r\n            };\r\n        });\r\n}\r\n\r\nexport const DeleteExpense = async (id: number) => {\r\n\r\n    API.delete(\"/expenses/\" + id)\r\n        .then(response => {\r\n            console.log(response);\r\n\r\n            return {response: response};\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n            \r\n            return {response: error.response};\r\n        })\r\n}\r\n\r\nexport const UpdateExpense = async (id: number) => {\r\n\r\n    return API.put(\"/expenses\")\r\n        .then(response => {\r\n            console.log(response);\r\n            return {response: response};\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n            return {response: error.response};\r\n        })\r\n}\r\n\r\nexport const GetExpensesSumForYear = async () => {\r\n\r\n    return API.get(\"/expenses/sum/year\")\r\n        .then(response => {\r\n            console.log(response);\r\n            const sums: ExpenseForSum[] = response.data.sums;\r\n\r\n            return {\r\n                response: response,\r\n                data: sums\r\n            };\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n            return {\r\n                response: error.response,\r\n                data: error.response.data\r\n            };\r\n        });\r\n}\r\n\r\nexport const GetExpensesSumForMonth = async () => {\r\n\r\n    return API.get(\"/expenses/sum/month\")\r\n        .then(response => {\r\n            console.log(response);\r\n            const sums: ExpenseForSum[] = response.data.sums;\r\n\r\n            return {\r\n                response: response,\r\n                data: sums\r\n            };\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n            return {\r\n                response: error.response,\r\n                data: error.response.data\r\n            };\r\n        });\r\n}\r\n\r\nexport const GetExpensesSumForToday = async () => {\r\n\r\n    return API.get(\"/expenses/sum/today\")\r\n        .then(response => {\r\n            console.log(response);\r\n            const sums: ExpenseForSum[] = response.data.sums;\r\n\r\n            return {\r\n                response: response,\r\n                data: sums\r\n            };\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n            return {\r\n                response: error.response,\r\n                data: error.response.data\r\n            };\r\n        });\r\n}\r\n\r\nexport const GetUserExpenses = async () => {\r\n\r\n    return API.get(\"/expenses\")\r\n        .then(response => {\r\n            let expenses: Expense[] = [];\r\n            let data:any[] = response.data;\r\n\r\n            data.forEach(element => {\r\n                let dateString = element.date;\r\n                let date = dateString.substring(0, 10);\r\n                let expense:Expense = {\r\n                    id: element.id,\r\n                    purseId: element.purseId,\r\n                    title: element.title,\r\n                    money: element.money,\r\n                    date: new Date(date),\r\n                };\r\n                \r\n                expenses.push(expense);\r\n            });\r\n            \r\n            return {\r\n                response: response,\r\n                data: expenses\r\n            };\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n\r\n            return {\r\n                response:error.response,\r\n                data: error.response.data\r\n            };\r\n        })\r\n}\r\n\r\nexport const GetUserExpensesByTopic = async (topic: Topic) => {\r\n\r\n    return API.get(\"/expenses/topic/\" + topic.id)\r\n        .then(response => {\r\n            let expenses: Expense[] = [];\r\n            let data:any[] = response.data;\r\n\r\n            data.forEach(element => {\r\n                let dateString = element.date;\r\n                let date = dateString.substring(0, 10);\r\n                let expense:Expense = {\r\n                    id: element.id,\r\n                    purseId: element.purseId,\r\n                    title: element.title,\r\n                    money: element.money,\r\n                    date: new Date(date),\r\n                };\r\n                \r\n                expenses.push(expense);\r\n            });\r\n            \r\n            return {\r\n                response: response,\r\n                data: expenses\r\n            };\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n\r\n            return {\r\n                response:error.response,\r\n                data: error.response.data\r\n            };\r\n        })\r\n}\r\n\r\nexport const GetPagedUserExpenses = async (request: PagedRequest, topic?: Topic) => {\r\n\r\n    const token = GetCurrentUser().accessToken;\r\n    const userId: string = (jwt_decode(token) as any).UserId;\r\n\r\n    const filters: RequestFilters = {\r\n        logicalOperators: LogicalOperators.and,\r\n        filters: [\r\n            {\r\n                path: \"OwnerId\",\r\n                value: userId\r\n            }\r\n        ]\r\n    }\r\n\r\n    if(topic != undefined)\r\n    {\r\n        filters.filters.push(\r\n            {\r\n                path: \"TopicId\",\r\n                value: topic.id.toString()\r\n            }\r\n        );\r\n    }\r\n\r\n    request.requestFilters = filters;\r\n    if(request.columnNameForSorting == undefined)\r\n    {\r\n        request.columnNameForSorting = \"Date\";\r\n        request.sortDirection = \"DESC\";\r\n    }\r\n    console.log(\"request: \" + JSON.stringify(request));\r\n    \r\n    return API.post(\"Expenses/PaginatedSearch\", request)\r\n        .then(response => {\r\n            let result: PagedResult<Expense> = response.data;\r\n            let expenses: Expense[] = [];\r\n\r\n            result.items.forEach(e => {\r\n                let dateString = e.date.toString();\r\n                let date = dateString.substring(0, 10);\r\n                let expense:Expense = {\r\n                    id: e.id,\r\n                    purseId: e.purseId,\r\n                    title: e.title,\r\n                    money: e.money,\r\n                    date: new Date(date).toString(),\r\n                };\r\n                \r\n                console.log(expense.date.getFullYear());\r\n                expenses.push(expense);\r\n            });\r\n\r\n            result.items = expenses;\r\n\r\n            return {\r\n                response: response,\r\n                data: result\r\n            };\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n\r\n            return {\r\n                response:error.response,\r\n                data: error.response.data\r\n            };\r\n        });\r\n}\r\n\r\nexport default {\r\n    GetExpensesForCurrentYear,\r\n    GetAllExpenses,\r\n    DeleteExpense,\r\n    GetExpensesSumForToday,\r\n    GetExpensesSumForMonth,\r\n    GetExpensesSumForYear,\r\n    GetUserExpensesByTopic,\r\n    GetUserExpenses,\r\n    GetPagedUserExpenses\r\n}"]},"metadata":{},"sourceType":"module"}